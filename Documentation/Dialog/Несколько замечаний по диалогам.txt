Несколько замечаний по диалогам
Пишу в сокращенной форме(без кода) ибо с диалогами давно отлично справляется утилита из состава ЗП sdk и разбирать xml в ручную стало гораздо меньше необходимости. Плюс урок явно не для совсем начинающих.

Допустим, у вас по сценарию есть три ветки(фразы), которые может сказать непись в ответ на вашу стартовую.
1. Первый разговор на эту тему вообще
2. Первый разговор закончился позитивно и может быть продолжен
3. Первый разговор закончился негативно и непись готов вам об этом напомнить и (может быть) вы еще что-то можете поменять(но уже на худших условиях).

Напрашивающееся решение состоит в том, чтобы проверить dont_has_info "first_time" в ветке 1 и has_info "positive" и "negative" в 2 и 3. После первого разговора и выдачи инфопорции "first_time" выдаем так же один из 2 возможных инфопорций по результату разговора и дело в шляпе - первая ветка отсечена навсегда, так же как и одна из двух других.

Но на самом деле в таком случае произойдет вылет - казалось бы без всякой логики, но в действительности игра предостерегает нас от ошибок избыточности. Ибо инфорпорция "first_time" нам совершенно не нужна - достаточно в первой ветке написать dont_has_info "positive" и dont_has_info "negative"(2 и 3 помечены как раньше). Выдача одной из этих инфопорций автоматически отсечет 2 ветки из 3.


Допустим, так же, что в другом случае вам надо, чтобы непись четко решал что-то в вашу пользу при определенном условии и, с какой-то вероятностью, обратном случае тоже(да, именно так). Например, какие-то вопросы скидок, уступок, помощи и т.п. То есть, если вы сделали ему что-то хорошее в прошлом - точно поможет, но может помочь и просто так, по доброте душевной, даже если вы не помогали(ведь вы не враги).

То есть у нас 2 ветки
1. Положительное решение вопроса
2. Отрицательное решение вопроса

Проще всего сделать так: поставить has_info "neutral" на вторую ветку. Инфопорция эта будет заранее выдаваться вами в том случае, если вы и правда совершенно нейтральны к неписю - тогда выбор автоматически произойдет из двух вариантов случайно - помочь или нет. Если вы помогали ранее, то инфопорция выдана не будет и сработает только первая ветка.

Понятно, это можно и легко обратить - чтобы непись чаще отказывал, а не помогал, если вы раньше никак не общались.